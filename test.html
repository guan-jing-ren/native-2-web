<!DOCTYPE html>
<html>

<head>
    <style>
        * {
            font-family: "Source Code Pro";
        }
        
        .n2w-html {
            border-style: solid;
            border-width: 2px;
            border-color: black;
        }
    </style>
    <script src='https://d3js.org/d3.v4.min.js' type='text/javascript'></script>
    <script src='native-2-web.js' type='text/javascript'></script>
</head>

<body>
    <script src='test_readers.js' type='text/javascript'></script>
    <script type='text/javascript'>
        let ws = new WebSocket('ws://localhost:9001');
        ws.addEventListener('open', (ev) => { ws.send("Hello world!"); ws.send(new ArrayBuffer(20)); }, true);
        let ws2 = new WebSocket('ws://localhost:9002');
        let count = 0;
        ws2.addEventListener('message', (ev) => { console.log(ev.data); if (count++ > 20) ws2.close(); });
    </script>
    <script src='modules.js' type='text/javascript'></script>
    <br/>
    <button onclick='n2w.fs.current_working_directory(ws).then(data => {console.log(data); n2w.fs.set_current_working_directory(ws, "/home/kykwan/").then(data => n2w.sys.fs.current_working_directory(ws).then(console.log));})'>change directory</button>
    <br/>
    <button onclick='n2w.$server.reload_plugins(ws); window.location.reload(true);'>reload plugins</button>
</body>

</html>